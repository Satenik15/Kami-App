import{a as z}from"./chunk-JT3Q33VC.js";import{a as d,b as G,c as J,d as K,e as N,f as Q}from"./chunk-RHGHHFGS.js";import{a as B,b as U,l as q}from"./chunk-5M45RFC7.js";import{$ as M,$a as D,Aa as b,B as S,Ba as k,F as y,Fa as C,G as w,Ga as E,Ha as T,M as x,N as s,T as I,Ta as O,Ua as $,V as l,Y as L,_ as F,aa as a,ba as r,ca as f,cb as j,d as v,fb as A,ga as R,hb as H,ia as h,ja as c,s as P,sa as g,t as _,ta as V,z as m}from"./chunk-INOZ2VHS.js";var X=(o,n)=>n.id,Y=o=>["/photo",o];function Z(o,n){if(o&1&&(a(0,"div",6)(1,"a",8),f(2,"fa-icon",9),r(),a(3,"p"),g(4),C(5,"titlecase"),r(),f(6,"img",10),r()),o&2){let p=n.$implicit,e=c();s(),l("routerLink",k(6,Y,p.id)),s(),l("icon",e.faLink),s(2),V(E(5,4,p.title)),s(2),l("src",p.url,x)}}function ee(o,n){if(o&1){let p=R();a(0,"app-pagination",11),h("onChangePage",function(t){y(p);let i=c();return w(i.onPaginate(t))}),r()}if(o&2){let p=c();l("pagesLength",p.photosCopy.length)("currentPage",p.startItem/10+1)}}var Pe=(()=>{let n=class n{constructor(){this.photoservice=m(z),this.filterService=m(G),this.helperService=m(H),this.routerService=m(J),this.route=m(D),this.destroy$=new v,this.faLink=q,this.searchValue="",this.startItem=0,this.limit=10,this.Sort=d,this.photos=[],this.photosCopy=[],this.sortParams=[{id:0,name:"Title",value:d.DESC},{id:1,name:"Title",value:d.ASC}]}ngOnInit(){this.helperService.updateCurrentPage("Photo List"),this.photoservice.photos$.pipe(P(e=>(e?(this.photos=e,this.photosCopy=e):this.photoservice.getPhotos().subscribe(),this.route.queryParams.pipe(_(this.destroy$))))).subscribe(e=>{this.photos&&this.photos.length&&(e.page?(this.updateRouting(e.page),this.startItem=(+e.page-1)*this.limit):this.updateRouting(1),e.search&&(this.searchValue=e.search,this.getFilteredPhotos(e.search,!1)),e.sort&&e.sortId&&(this.selectedItem=this.sortParams.find(t=>t.id===+e.sortId),this.onSort(this.selectedItem)))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getFilteredPhotos(e,t=!0){let i={search:e||""};this.photosCopy=this.filterService.onFilterData(this.photos,e,"title"),t&&this.routerService.updateRouting(i)}onSort(e){let t={sort:e.name,dir:e.value,sortId:e.id};this.photosCopy=this.filterService.onSortData(this.photosCopy,e.name.toLowerCase(),e.value),this.routerService.updateRouting(t)}onPaginate(e){this.startItem=(e-1)*this.limit,this.updateRouting(e)}updateRouting(e){let t={page:e,limit:this.limit};this.routerService.updateRouting(t)}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=S({type:n,selectors:[["app-photo-list"]],standalone:!0,features:[b],decls:11,vars:8,consts:[[1,"p-4"],[1,"mb-5"],[1,"d-flex","align-items-lg-center","flex-column","flex-lg-row","gap-4","pb-5"],["type","photo",3,"updateValue","searchValue"],[3,"onSelect","items","selectedItem"],[1,"photo-wrapper","d-grid"],[1,"card","rounded-3","border-0","d-flex","flex-column","justify-content-between","mb-3","p-4","text-decoration-none"],[3,"pagesLength","currentPage"],[1,"d-flex","align-items-center","justify-content-end",3,"routerLink"],[1,"fa-link",3,"icon"],["alt","photo image",1,"rounded-3",3,"src"],[3,"onChangePage","pagesLength","currentPage"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"h5",1),g(2,"Photo List"),r(),a(3,"div",2)(4,"app-search",3),h("updateValue",function(u){return i.getFilteredPhotos(u)}),r(),a(5,"app-select",4),h("onSelect",function(u){return i.onSort(u)}),r()(),a(6,"div",5),F(7,Z,7,8,"div",6,X),C(9,"slice"),r(),I(10,ee,1,2,"app-pagination",7),r()),t&2&&(s(4),l("searchValue",i.searchValue),s(),l("items",i.sortParams)("selectedItem",i.selectedItem),s(2),M(T(9,4,i.photosCopy,i.startItem,i.startItem+10)),s(3),L(10,i.photosCopy&&i.photosCopy.length?10:-1))},dependencies:[$,O,A,j,U,B,K,N,Q],styles:[".photo-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr);grid-gap:20px}.photo-wrapper[_ngcontent-%COMP%]   .fa-link[_ngcontent-%COMP%]{color:#44637f}@media (max-width: 1200px){.photo-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 576px){.photo-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}.card[_ngcontent-%COMP%]{max-width:100%}}"]});let o=n;return o})();export{Pe as PhotoListComponent};
