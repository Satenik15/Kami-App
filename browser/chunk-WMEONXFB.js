import{a as J}from"./chunk-O2PTITDM.js";import{a as H}from"./chunk-UQXJZOD3.js";import{a as h,b as K,c as N,d as Q,e as W,f as X}from"./chunk-RHGHHFGS.js";import{a as G}from"./chunk-GZQ7Q2Y5.js";import{a as j,b as B,d as U}from"./chunk-5M45RFC7.js";import{$ as A,$a as T,Aa as R,B as S,Ba as M,F as _,Fa as O,G as y,Ha as V,N as a,T as P,Ua as E,V as p,Y as x,Z as I,_ as w,aa as s,ba as n,bb as D,ca as u,cb as $,d as b,fb as k,ga as L,gb as q,hb as z,ia as c,ja as d,s as C,sa as g,t as v,ta as F,z as l}from"./chunk-INOZ2VHS.js";var Z=r=>["/album",r];function ee(r,o){if(r&1&&(s(0,"div",6)(1,"p"),g(2),n(),s(3,"div",8),u(4,"app-album-card"),s(5,"div",9)(6,"a",10),u(7,"fa-icon",11),n(),u(8,"app-user-card",12),n()()()),r&2){let m=o.$implicit,e=d();a(2),F(m.title),a(4),p("routerLink",M(4,Z,m.id)),a(),p("icon",e.faFolderOpen),a(),p("id",m.userId)}}function te(r,o){if(r&1){let m=L();s(0,"app-pagination",13),c("onChangePage",function(t){_(m);let i=d();return y(i.onPaginate(t))}),n()}if(r&2){let m=d();p("pagesLength",m.albumsCopy.length)("currentPage",m.startItem/10+1)}}var Pe=(()=>{let o=class o{constructor(){this.router=l(D),this.route=l(T),this.albumService=l(H),this.loaderService=l(q),this.filterService=l(K),this.helperService=l(z),this.routerService=l(N),this.destroy$=new b,this.startItem=0,this.limit=10,this.searchValue="",this.faFolderOpen=U,this.Sort=h,this.sortParams=[{id:0,name:"Title",value:h.DESC},{id:1,name:"Title",value:h.ASC}]}ngOnInit(){this.helperService.updateCurrentPage("Album List"),this.albumService.albums$.pipe(C(e=>(e?(this.albums=e,this.albumsCopy=e):this.albumService.getAlbums().subscribe(),this.route.queryParams.pipe(v(this.destroy$))))).subscribe(e=>{this.albums&&this.albums.length&&(e.page?(this.updateRouting(e.page),this.startItem=(+e.page-1)*this.limit):this.updateRouting(1),e.search&&(this.searchValue=e.search,this.getFilteredAlbums(e.search,!1)),e.sort&&e.sortId&&(this.selectedItem=this.sortParams.find(t=>t.id===+e.sortId),this.onSort(this.selectedItem)))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getFilteredAlbums(e,t=!0){let i={search:e||""};this.albumsCopy=this.filterService.onFilterData(this.albums,e,"title"),t&&this.routerService.updateRouting(i)}onSort(e){let t={sort:e.name,dir:e.value,sortId:e.id};this.albumsCopy=this.filterService.onSortData(this.albumsCopy,e.name.toLowerCase(),e.value),this.routerService.updateRouting(t)}onPaginate(e){this.startItem=(e-1)*this.limit,this.updateRouting(e)}updateRouting(e){let t={page:e,limit:this.limit};this.routerService.updateRouting(t)}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=S({type:o,selectors:[["app-album-list"]],standalone:!0,features:[R],decls:11,vars:8,consts:[[1,"p-4"],[1,"mb-5"],[1,"d-flex","align-items-lg-center","flex-column","flex-lg-row","gap-4","pb-5"],["type","album",3,"updateValue","searchValue"],[3,"onSelect","items","selectedItem"],[1,"album-wrapper","d-grid"],[1,"card","rounded-3","border-0","d-flex","flex-column","justify-content-between","gap-2","p-4","text-decoration-none"],[3,"pagesLength","currentPage"],[1,"d-flex","flex-column","gap-3"],[1,"d-flex","align-items-center","justify-content-end","gap-2"],[3,"routerLink"],[1,"folder-icon",3,"icon"],[3,"id"],[3,"onChangePage","pagesLength","currentPage"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"h5",1),g(2,"Album List"),n(),s(3,"div",2)(4,"app-search",3),c("updateValue",function(f){return i.getFilteredAlbums(f)}),n(),s(5,"app-select",4),c("onSelect",function(f){return i.onSort(f)}),n()(),s(6,"div",5),w(7,ee,9,6,"div",6,I),O(9,"slice"),n(),P(10,te,1,2,"app-pagination",7),n()),t&2&&(a(4),p("searchValue",i.searchValue),a(),p("items",i.sortParams)("selectedItem",i.selectedItem),a(2),A(V(9,4,i.albumsCopy,i.startItem,i.startItem+10)),a(3),x(10,i.albumsCopy&&i.albumsCopy.length>0?10:-1))},dependencies:[E,k,$,B,j,G,Q,W,X,J],styles:[".album-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr);grid-gap:20px}.album-wrapper[_ngcontent-%COMP%]   .folder-icon[_ngcontent-%COMP%]{color:#44637f}@media (max-width: 1200px){.album-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 576px){.album-wrapper[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}.card[_ngcontent-%COMP%]{max-width:100%}}"]});let r=o;return r})();export{Pe as AlbumListComponent};
